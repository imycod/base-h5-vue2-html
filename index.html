<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
    content="width=device-width, user-scalable=no,initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./assets/normalize.css">
  <link rel="stylesheet" href="./assets/index.css">
  <link rel="stylesheet/less" type="text/css" href="./assets/styles.less">
  </link>
  <!-- less compile -->
  <script src="./assets/less.min.js"></script>
</head>

<body>
  <div id="root">
    <router-view></router-view>
  </div>

  <!-- tempalte home -->
  <script type="text/template" id="home">
        <div class="wrapper">
            <div class="v-i-top">
                
            </div>
            <div class="v-i-form">
                <van-form @submit="onSubmit">
                    <van-field
                    v-model="reporter"
                    name="reporter" 
                    label="上报者姓名"
                    placeholder="上报者姓名"
                    :rules="[{ required: true, message: '请填写上报者姓名' }]"
                    />
                    <van-field
                        v-model="username"
                        name="username"
                        label="患者姓名"
                        placeholder="患者姓名"
                        :rules="[{ required: true, message: '请填写患者姓名' }]"
                    />
                    <van-field 
                    v-model="idCard"
                    name="idCard" 
                    label="患者身份证号"
                    placeholder="请输入患者身份证号"   
                    :rules="[{ required: true,message: '请填写患者身份证号' },{pattern,message:'身份证号输入错误,请重新输入'}]" />
                    <div style="margin: 16px;">
                    <van-button round block type="info" native-type="submit">开始上报</van-button>
                    </div>
                </van-form>
            </div>
        </div>
    </script>

  <!-- template info-->
  <script type="text/template" id="info">
        <div class="wrapper">
            <div class="header">患者信息</div>
            <div class="v-ii-form">
                <van-form @submit="onSubmit">
                    <div v-for="v in view.form" :key="v.prop">
                      <div v-if="['tel','text','number'].includes(v.type)">
                        <div :class="v.class" v-if="v.label==''">
                          {{v.customLabel}}
                        </div>
                        <van-field
                          v-model="form[v.prop]"
                          :name="v.name"
                          :type="v.type"
                          :label="v.label"
                          :placeholder="v.placeholder"
                          :rules="v.rules"
                        />
                      </div>
                      <div class="select-date" v-if="v.type == 'select'">
                        <span class="label">{{v.label}}</span>
                        <div class="select">
                          <span v-for="d in v.options" class="date">
                            <select v-if="d.prop == 'year'" v-model="form.selectDate[d.prop]">
                              <option v-for="i in d.step" :key="i">{{i+d.value - d.step}}</option>
                            </select>
                            <select v-if="d.prop!=='year'"  v-model="form.selectDate[d.prop]">
                              <option v-for="(i) in d.value" :key="i">{{i}}</option>
                            </select><span class="subffix">{{d.label}}</span>
                          </span>
                        </div>
                      </div>
                      <div v-if="v.type == 'radio'">
                          <van-field :name="v.name" :label="v.label">
                            <template #input>
                              <van-radio-group v-model="form[v.prop]" direction="horizontal">
                                <van-radio v-for="o in v.options" :name="o.value" :key="o.value">{{o.label}}</van-radio>
                              </van-radio-group>
                          </template>
                        </van-field>
                      </div>
                      <div v-if="v.type == 'picker'">
                        <van-field
                            :readonly="v.readonly"
                            :clickable="v.clickable"
                            :name="v.name"
                            :value="form[v.prop]"
                            :label="v.label"
                            :placeholder="v.placeholder"
                            @click="v.onClick(v.prop)"
                            :rules="v.rules"
                          />
                      </div>
                    </div>

                    <div style="margin: 16px;">
                      <van-button round block type="info" native-type="submit">下一步</van-button>
                    </div>
                  </van-form>
            </div>


            <van-popup v-model="view.model.picker" position="bottom">
                <van-datetime-picker
                  v-if="view.model.pickerType == 'date-picker'"
                  type="date"
                  title="年月日"
                  :formatter="formatter"
                  :min-date="view.model.minDate"
                  :max-date="view.model.maxDate"
                  @confirm="(val)=>onConfirm(val,'date-picker','birthDate')"
                  @cancel="view.model.picker = false"
                  />
                  <!-- :value="value" -->
                <van-picker
                  v-else
                  title="民族"
                  show-toolbar
                  :columns="view.model.nationColumns"
                  @confirm="(val)=>onConfirm(val,'picker','nation')"
                  @cancel="view.model.picker = false"
                />
              </van-popup>
        </div>  
    </script>

  <!-- template  about -->
  <script type="text/template" id="adverse">
        <div class='wrapper'>
          <div class="header">不良事件</div>
          <div class="v-iii-form">

          </div>
        </div>
    </script>

  <script src="./assets/flexible2.js"></script>
  <script src="./assets/moment.min.js"></script>
  <script src="./assets/vue.min.js"></script>
  <script src="./assets/vue-router.min.js"></script>
  <script src="./assets/vuex.min.js"></script>
  <script src="./assets/vant.min.js"></script>

  <script src="./model/nations.js"></script>
  <script src="./assets/index.js"></script>
</body>

</html>